{"id":"../node_modules/@ceramicnetwork/common/lib/utils/test-utils.js","dependencies":[{"name":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/common/lib/utils/test-utils.js.map","includedInParent":true,"mtime":1642247367864},{"name":"/home/vitalpointai/projects/space-gems/package.json","includedInParent":true,"mtime":1642266346920},{"name":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/common/package.json","includedInParent":true,"mtime":1642247367864},{"name":"rxjs/operators","loc":{"line":4,"column":28},"parent":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/common/lib/utils/test-utils.js","resolved":"/home/vitalpointai/projects/space-gems/node_modules/rxjs/dist/esm5/operators/index.js"},{"name":"rxjs","loc":{"line":5,"column":23},"parent":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/common/lib/utils/test-utils.js","resolved":"/home/vitalpointai/projects/space-gems/node_modules/rxjs/dist/esm5/index.js"},{"name":"@ceramicnetwork/streamid","loc":{"line":6,"column":27},"parent":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/common/lib/utils/test-utils.js","resolved":"/home/vitalpointai/projects/space-gems/node_modules/@ceramicnetwork/streamid/lib/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestUtils = void 0;\nconst operators_1 = require(\"rxjs/operators\");\nconst rxjs_1 = require(\"rxjs\");\nconst streamid_1 = require(\"@ceramicnetwork/streamid\");\nclass FakeRunningState extends rxjs_1.BehaviorSubject {\n    constructor(value) {\n        super(value);\n        this.state = this.value;\n        this.id = new streamid_1.StreamID(this.state.type, this.state.log[0].cid);\n    }\n}\nclass TestUtils {\n    static registerChangeListener(stream) {\n        return stream.pipe(operators_1.take(1)).toPromise();\n    }\n    static async waitForState(stream, timeout, predicate, onFailure) {\n        if (predicate(stream.state))\n            return;\n        const timeoutPromise = new Promise((resolve) => setTimeout(resolve, timeout));\n        const completionPromise = stream.pipe(operators_1.filter((state) => predicate(state))).toPromise();\n        await Promise.race([timeoutPromise, completionPromise]);\n        if (!predicate(stream.state)) {\n            onFailure();\n        }\n    }\n    static runningState(state) {\n        return new FakeRunningState(state);\n    }\n    static async delay(ms) {\n        return new Promise((resolve) => {\n            setTimeout(() => resolve(), ms);\n        });\n    }\n}\nexports.TestUtils = TestUtils;\n"},"sourceMaps":{"js":{"version":3,"file":"test-utils.js","sourceRoot":"","sources":["../../src/utils/test-utils.ts"],"names":[],"mappings":";;;AACA,8CAA6C;AAC7C,+BAAsC;AAEtC,uDAAmD;AAEnD,MAAM,gBAAiB,SAAQ,sBAA4B;IAIzD,YAAY,KAAkB;QAC5B,KAAK,CAAC,KAAK,CAAC,CAAA;QACZ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;QACvB,IAAI,CAAC,EAAE,GAAG,IAAI,mBAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;IAChE,CAAC;CACF;AAED,MAAa,SAAS;IAKpB,MAAM,CAAC,sBAAsB,CAAC,MAAc;QAC1C,OAAO,MAAM,CAAC,IAAI,CAAC,gBAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAA;IACzC,CAAC;IAUD,MAAM,CAAC,KAAK,CAAC,YAAY,CACvB,MAAc,EACd,OAAe,EACf,SAA0C,EAC1C,SAAqB;QAErB,IAAI,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC;YAAE,OAAM;QACnC,MAAM,cAAc,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAA;QAC7E,MAAM,iBAAiB,GAAG,MAAM,CAAC,IAAI,CAAC,kBAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAA;QACtF,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC,CAAA;QACvD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;YAC5B,SAAS,EAAE,CAAA;SACZ;IACH,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,KAAkB;QACpC,OAAO,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAA;IACpC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,EAAU;QAC3B,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,EAAE;YACnC,UAAU,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE,EAAE,CAAC,CAAA;QACjC,CAAC,CAAC,CAAA;IACJ,CAAC;CACF;AAzCD,8BAyCC","sourcesContent":[null]}},"error":null,"hash":"f3d73b9257ee0ccf8ca9d60741b7c25a","cacheData":{"env":{}}}